(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===o?new Date(t.getTime()):"number"==typeof t||"[object Number]"===o?new Date(t):("string"!=typeof t&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function o(o){e(1,arguments);var r=t(o);return r.setHours(0,0,0,0),r}function r(t,r){e(2,arguments);var n=o(t),c=o(r);return n.getTime()===c.getTime()}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function c(o,r){e(1,arguments);var c=r||{},a=c.locale,i=a&&a.options&&a.options.weekStartsOn,u=null==i?0:n(i),s=null==c.weekStartsOn?u:n(c.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=t(o),d=l.getDay(),p=(d<s?7:0)+d-s;return l.setDate(l.getDate()-p),l.setHours(0,0,0,0),l}function a(t,o,r){e(2,arguments);var n=c(t,r),a=c(o,r);return n.getTime()===a.getTime()}function i(e){const t=JSON.stringify(e);localStorage.setItem("project",t)}const u=function(){const e=function(){const e=localStorage.getItem("project");return e?JSON.parse(e):null}();return e||{inbox:[]}}(),s=function(e){u[e]=[],i(u)},l=function(e){delete u[e],i(u)},d=function(e,t,o,r,n){const c=function(e,t,o,r){return{title:e,description:t,dueDate:o,priority:r}}(t,o,r,n);u[e].push(c),i(u)},p=function(e,t){u[e].splice(t,1),i(u)},y=function(){return u},m=function(e){return u[e]},f=function(e,t,o,r){const n=u[e][t];n.dueDate=o,n.priority=r,i(u)},j=function(){const t={...u};return Object.keys(t).forEach((o=>{const n=t[o].map((t=>function(t){return e(1,arguments),r(t,Date.now())}(new Date(t.dueDate))?t:""));t[o]=n})),t},S=function(){const t={...u};return Object.keys(t).forEach((o=>{const r=t[o].map((t=>function(t,o){return e(1,arguments),a(t,Date.now(),o)}(new Date(t.dueDate))?t:""));t[o]=r})),t},b=function(e){const t=Object.keys(u);return["Daily","Daily Projects","This Week","Weekly Projects","inbox"].concat(t).includes(e)};function q(e){const t=document.querySelector(".card-template").content.cloneNode(!0).querySelector(".card");return t.querySelector(".title").textContent=e.title,t.querySelector(".date").textContent=e.dueDate,t.querySelector(".priority").textContent=e.priority,t}function v(e,t){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",t)}))}function g(){document.querySelectorAll(".form-wrapper").forEach((e=>{e.classList.add("hidden")}))}function D(e){const t=document.querySelector(".todo-form"),o=e.target.getAttribute("data-project");t.querySelector(".todo-form-title").textContent=o,document.querySelector(".n-todo").classList.remove("hidden")}function h(e){const t=document.querySelector(".edit-todo-form");t.querySelector("#index").value=e.target.getAttribute("data-index"),t.querySelector("#project").value=e.target.getAttribute("data-project"),document.querySelector(".e-todo").classList.remove("hidden")}v(".new-project",(function(){document.querySelector(".n-project").classList.remove("hidden")})),document.querySelectorAll(".cancel").forEach((e=>{e.addEventListener("click",(()=>{g()}))}));const x={populateProjectDisplay:function(e,t){const o=document.querySelector(".display");o.textContent="",document.querySelector(".project-name").textContent=e,t.forEach(((t,r)=>{const n=q(t);n.querySelector(".remove").setAttribute("data-project",e),n.querySelector(".remove").setAttribute("data-index",r),n.querySelector(".edit").setAttribute("data-project",e),n.querySelector(".edit").setAttribute("data-index",r),o.appendChild(n)}));const r=document.createElement("button");r.classList.add("new-todo"),r.setAttribute("data-project",e),r.textContent="Add new Todo",r.addEventListener("click",D),v(".edit",h),o.appendChild(r)},populateSidebar:function(e){const t=document.querySelector(".projects");t.textContent="",e.forEach((e=>{if("inbox"===e)return;const o=document.createElement("div");o.classList.add("project-tab"),o.setAttribute("data-project",e);const r=document.createElement("p");r.textContent=e;const n=document.createElement("button");n.textContent="X",n.setAttribute("data-project",e),n.classList.add("delete-project"),o.appendChild(r),o.appendChild(n),t.appendChild(o)}))},addListener:v,populateTimedDisplay:function(e,t){const o=document.querySelector(".display");o.textContent="",document.querySelector(".project-name").textContent=t,Object.keys(e).forEach((t=>{e[t].forEach(((e,r)=>{if(""===e)return;const n=q(e);n.querySelector(".remove").setAttribute("data-project",t),n.querySelector(".remove").setAttribute("data-index",r),n.querySelector(".edit").setAttribute("data-project",t),n.querySelector(".edit").setAttribute("data-index",r),o.appendChild(n)}))})),v(".edit",h)},hideAllForms:g},L=document.querySelector(".inbox"),k=document.querySelector(".today"),A=document.querySelector(".week");function w(e){const t=e.target.getAttribute("data-project"),o=e.target.getAttribute("data-index");p(t,o);const r=document.querySelector(".project-name").textContent;if("Daily Projects"===r){const e=j();x.populateTimedDisplay(e,"Daily Projects")}else if("Weekly Projects"===r){const e=S();x.populateTimedDisplay(e,"Weekly Projects")}else{const e=m(t);x.populateProjectDisplay(t,e)}x.addListener(".remove",w)}function E(e){const t=e.target.getAttribute("data-project"),o=m(t);o&&(x.populateProjectDisplay(t,o),x.addListener(".remove",w))}function C(){const e=m("inbox");x.populateProjectDisplay("inbox",e),x.addListener(".remove",w)}function P(e){const t=e.target.getAttribute("data-project");l(t),x.populateSidebar(Object.keys(y())),x.addListener(".delete-project",P),x.addListener(".project-tab",E);const o=m("inbox");x.populateProjectDisplay("inbox",o),x.addListener(".remove",w)}k.addEventListener("click",(()=>{const e=j();x.populateTimedDisplay(e,"Daily Projects"),x.addListener(".remove",w)})),A.addEventListener("click",(()=>{const e=S();x.populateTimedDisplay(e,"Weekly Projects"),x.addListener(".remove",w)})),L.addEventListener("click",C),document.querySelector(".project-form").addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelector("#project-name").value;b(t)?alert("Projects Name cannot be the Same!"):(s(t),x.populateSidebar(Object.keys(y())),x.addListener(".delete-project",P),x.addListener(".project-tab",E),e.target.reset(),x.hideAllForms())})),document.querySelector(".todo-form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target,o=t.querySelector(".todo-form-title").textContent,r=t.querySelector("#title").value,n=t.querySelector("#date").value,c=t.querySelector("#priority").value;d(o,r,"lol",n,c);const a=m(o);x.populateProjectDisplay(o,a),x.addListener(".remove",w),e.target.reset(),x.hideAllForms()})),document.querySelector(".edit-todo-form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target.querySelector("#date").value,o=e.target.querySelector("#priority").value,r=e.target.querySelector("#project").value,n=e.target.querySelector("#index").value;f(r,n,t,o);const c=document.querySelector(".project-name").textContent;if("Daily Projects"===c){const e=j();x.populateTimedDisplay(e,"Daily Projects")}else if("Weekly Projects"===c){const e=S();x.populateTimedDisplay(e,"Weekly Projects")}else{const e=m(r);x.populateProjectDisplay(r,e)}x.addListener(".remove",w),e.target.reset(),x.hideAllForms()})),C(),x.populateSidebar(Object.keys(y())),x.addListener(".delete-project",P),x.addListener(".project-tab",E)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixrQkFBbUJ5RCxHQUNwQyxjQUFpQixlQUFnQkYsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ldmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGU7XG4gIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUgJiYgbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMud2Vla1N0YXJ0c09uO1xuICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eU9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVN0b3JhZ2UocHJvamVjdHMpIHtcbiAgY29uc3QgcHJvamVjdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RzKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0XCIsIHByb2plY3RTdHJpbmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmFnZSgpIHtcbiAgY29uc3QgcHJvamVjdHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RcIik7XG4gIGlmICghcHJvamVjdHMpIHJldHVybiBudWxsO1xuICByZXR1cm4gSlNPTi5wYXJzZShwcm9qZWN0cyk7XG59XG4iLCJpbXBvcnQgeyBpc1RvZGF5LCBpc1RoaXNXZWVrIH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgY3JlYXRlVG9kbyBmcm9tIFwiLi90b2Rvc1wiO1xuaW1wb3J0IHsgdXBkYXRlU3RvcmFnZSwgZ2V0U3RvcmFnZSB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb2plY3RzKCkge1xuICBjb25zdCBzYXZlZFByb2plY3RzID0gZ2V0U3RvcmFnZSgpO1xuICByZXR1cm4gc2F2ZWRQcm9qZWN0cyB8fCB7IGluYm94OiBbXSB9O1xufVxuXG5jb25zdCBwcm9qZWN0cyA9IGluaXRpYWxpemVQcm9qZWN0cygpO1xuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KG5hbWUpIHtcbiAgcHJvamVjdHNbbmFtZV0gPSBbXTtcblxuICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICBkZWxldGUgcHJvamVjdHNbcHJvamVjdE5hbWVdO1xuXG4gIHVwZGF0ZVN0b3JhZ2UocHJvamVjdHMpO1xufVxuXG5mdW5jdGlvbiBhZGRUb2RvVG9Qcm9qZWN0KHByb2plY3ROYW1lLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KSB7XG4gIGNvbnN0IHRvZG8gPSBjcmVhdGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xuICBwcm9qZWN0c1twcm9qZWN0TmFtZV0ucHVzaCh0b2RvKTtcblxuICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9kb0Zyb21Qcm9qZWN0KHByb2plY3ROYW1lLCB0b2RvSW5kZXgpIHtcbiAgcHJvamVjdHNbcHJvamVjdE5hbWVdLnNwbGljZSh0b2RvSW5kZXgsIDEpO1xuXG4gIHVwZGF0ZVN0b3JhZ2UocHJvamVjdHMpO1xufVxuXG5mdW5jdGlvbiBnZXRQcm9qZWN0VG9kb3MocHJvamVjdE5hbWUpIHtcbiAgcmV0dXJuIHByb2plY3RzW3Byb2plY3ROYW1lXTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvamVjdHMoKSB7XG4gIHJldHVybiBwcm9qZWN0cztcbn1cblxuZnVuY3Rpb24gdXBkYXRlVG9kbyhwcm9qZWN0TmFtZSwgaW5kZXgsIG5ld0RhdGUsIG5ld1ByaW9yaXR5KSB7XG4gIGNvbnN0IHRvZG8gPSBwcm9qZWN0c1twcm9qZWN0TmFtZV1baW5kZXhdO1xuICB0b2RvLmR1ZURhdGUgPSBuZXdEYXRlO1xuICB0b2RvLnByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG5cbiAgdXBkYXRlU3RvcmFnZShwcm9qZWN0cyk7XG59XG5cbmZ1bmN0aW9uIGdldERhaWx5UHJvamVjdHMoKSB7XG4gIGNvbnN0IGNsb25lZE9iaiA9IHsgLi4ucHJvamVjdHMgfTtcbiAgT2JqZWN0LmtleXMoY2xvbmVkT2JqKS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBjbG9uZWRPYmpbcHJvamVjdF0ubWFwKCh0b2RvKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodG9kby5kdWVEYXRlKTtcbiAgICAgIGlmIChpc1RvZGF5KGRhdGUpKSByZXR1cm4gdG9kbztcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pO1xuICAgIGNsb25lZE9ialtwcm9qZWN0XSA9IGZpbHRlcmVkO1xuICB9KTtcbiAgcmV0dXJuIGNsb25lZE9iajtcbn1cblxuZnVuY3Rpb24gZ2V0V2Vla2x5UHJvamVjdHMoKSB7XG4gIGNvbnN0IGNsb25lZE9iaiA9IHsgLi4ucHJvamVjdHMgfTtcbiAgT2JqZWN0LmtleXMoY2xvbmVkT2JqKS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBjbG9uZWRPYmpbcHJvamVjdF0ubWFwKCh0b2RvKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodG9kby5kdWVEYXRlKTtcbiAgICAgIGlmIChpc1RoaXNXZWVrKGRhdGUpKSByZXR1cm4gdG9kbztcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pO1xuICAgIGNsb25lZE9ialtwcm9qZWN0XSA9IGZpbHRlcmVkO1xuICB9KTtcbiAgcmV0dXJuIGNsb25lZE9iajtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5UHJvamVjdE5hbWUocHJvamVjdE5hbWUpIHtcbiAgY29uc3QgZGVmYXVsdHMgPSBbXG4gICAgXCJEYWlseVwiLFxuICAgIFwiRGFpbHkgUHJvamVjdHNcIixcbiAgICBcIlRoaXMgV2Vla1wiLFxuICAgIFwiV2Vla2x5IFByb2plY3RzXCIsXG4gICAgXCJpbmJveFwiLFxuICBdO1xuICBjb25zdCBjdXN0b21Qcm9qZWN0cyA9IE9iamVjdC5rZXlzKHByb2plY3RzKTtcbiAgY29uc3QgZXhpc3RpbmdQcm9qZWN0cyA9IGRlZmF1bHRzLmNvbmNhdChjdXN0b21Qcm9qZWN0cyk7XG4gIHJldHVybiBleGlzdGluZ1Byb2plY3RzLmluY2x1ZGVzKHByb2plY3ROYW1lKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBjcmVhdGVQcm9qZWN0LFxuICBkZWxldGVQcm9qZWN0LFxuICBhZGRUb2RvVG9Qcm9qZWN0LFxuICByZW1vdmVUb2RvRnJvbVByb2plY3QsXG4gIGdldFByb2plY3RzLFxuICBnZXRQcm9qZWN0VG9kb3MsXG4gIHVwZGF0ZVRvZG8sXG4gIGdldERhaWx5UHJvamVjdHMsXG4gIGdldFdlZWtseVByb2plY3RzLFxuICB2ZXJpZnlQcm9qZWN0TmFtZSxcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVOZXdUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkdWVEYXRlLFxuICAgIHByaW9yaXR5LFxuICB9O1xufVxuIiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIHZhciByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IGlzU2FtZVdlZWsgZnJvbSBcIi4uL2lzU2FtZVdlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQgYW5kIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5XG4gKiAvLyBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGhpc1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lV2VlayhkaXJ0eURhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufSIsImZ1bmN0aW9uIGNyZWF0ZUNhcmQodG9kbykge1xuICBjb25zdCBjYXJkVGVtcCA9IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC10ZW1wbGF0ZVwiKVxuICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZCA9IGNhcmRUZW1wLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlXCIpLnRleHRDb250ZW50ID0gdG9kby50aXRsZTtcbiAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmRhdGVcIikudGV4dENvbnRlbnQgPSB0b2RvLmR1ZURhdGU7XG4gIGNhcmQucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS50ZXh0Q29udGVudCA9IHRvZG8ucHJpb3JpdHk7XG4gIHJldHVybiBjYXJkO1xufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZVNpZGViYXIocHJvamVjdHMpIHtcbiAgY29uc3QgcHJvamVjdHNEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKTtcbiAgcHJvamVjdHNEaXNwbGF5LnRleHRDb250ZW50ID0gXCJcIjtcblxuICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgaWYgKHByb2plY3QgPT09IFwiaW5ib3hcIikgcmV0dXJuO1xuICAgIGNvbnN0IHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRhYlwiKTtcbiAgICB0YWIuc2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIsIHByb2plY3QpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBwcm9qZWN0O1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJYXCI7XG4gICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdFwiLCBwcm9qZWN0KTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZS1wcm9qZWN0XCIpO1xuICAgIHRhYi5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgdGFiLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgcHJvamVjdHNEaXNwbGF5LmFwcGVuZENoaWxkKHRhYik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihzZWxlY3RvciwgY2FsbGJhY2spIHtcbiAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbGxiYWNrKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qcm9qZWN0Rm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uLXByb2plY3RcIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbn1cblxuZnVuY3Rpb24gaGlkZUFsbEZvcm1zKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0td3JhcHBlclwiKS5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICB9KTtcbn1cblxuYWRkTGlzdGVuZXIoXCIubmV3LXByb2plY3RcIiwgb3BlblByb2plY3RGb3JtKTtcblxuZnVuY3Rpb24gb3BlblRvZG9Gb3JtKGUpIHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtXCIpO1xuICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdFwiKTtcbiAgZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tZm9ybS10aXRsZVwiKS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm4tdG9kb1wiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xufVxuXG5mdW5jdGlvbiBvcGVuRWRpdEZvcm0oZSkge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybVwiKTtcbiAgZm9ybS5xdWVyeVNlbGVjdG9yKFwiI2luZGV4XCIpLnZhbHVlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKTtcbiAgZm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RcIikudmFsdWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIik7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZS10b2RvXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FuY2VsXCIpLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBoaWRlQWxsRm9ybXMoKTtcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gcG9wdWxhdGVQcm9qZWN0RGlzcGxheShwcm9qZWN0TmFtZSwgdG9kb3MpIHtcbiAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVwiKTtcbiAgZGlzcGxheS50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG5cbiAgdG9kb3MuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZCh0b2RvKTtcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucmVtb3ZlXCIpLnNldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdFwiLCBwcm9qZWN0TmFtZSk7XG4gICAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnJlbW92ZVwiKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGluZGV4KTtcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFwiKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgcHJvamVjdE5hbWUpO1xuICAgIGNhcmQucXVlcnlTZWxlY3RvcihcIi5lZGl0XCIpLnNldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiwgaW5kZXgpO1xuICAgIGRpc3BsYXkuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gIH0pO1xuXG4gIGNvbnN0IG5ld3RvZG9CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBuZXd0b2RvQnRuLmNsYXNzTGlzdC5hZGQoXCJuZXctdG9kb1wiKTtcbiAgbmV3dG9kb0J0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgcHJvamVjdE5hbWUpO1xuICBuZXd0b2RvQnRuLnRleHRDb250ZW50ID0gXCJBZGQgbmV3IFRvZG9cIjtcbiAgbmV3dG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblRvZG9Gb3JtKTtcbiAgYWRkTGlzdGVuZXIoXCIuZWRpdFwiLCBvcGVuRWRpdEZvcm0pO1xuICBkaXNwbGF5LmFwcGVuZENoaWxkKG5ld3RvZG9CdG4pO1xufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZVRpbWVkRGlzcGxheShwcm9qZWN0TGlzdCwgaW50ZXJ2YWwpIHtcbiAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVwiKTtcbiAgZGlzcGxheS50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpLnRleHRDb250ZW50ID0gaW50ZXJ2YWw7XG5cbiAgT2JqZWN0LmtleXMocHJvamVjdExpc3QpLmZvckVhY2goKHByb2plY3ROYW1lKSA9PiB7XG4gICAgY29uc3QgdG9kb3MgPSBwcm9qZWN0TGlzdFtwcm9qZWN0TmFtZV07XG4gICAgdG9kb3MuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcbiAgICAgIGlmICh0b2RvID09PSBcIlwiKSByZXR1cm47XG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZCh0b2RvKTtcbiAgICAgIGNhcmQucXVlcnlTZWxlY3RvcihcIi5yZW1vdmVcIikuc2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIsIHByb2plY3ROYW1lKTtcbiAgICAgIGNhcmQucXVlcnlTZWxlY3RvcihcIi5yZW1vdmVcIikuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpbmRleCk7XG4gICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFwiKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgcHJvamVjdE5hbWUpO1xuICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRcIikuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpbmRleCk7XG4gICAgICBkaXNwbGF5LmFwcGVuZENoaWxkKGNhcmQpO1xuICAgIH0pO1xuICB9KTtcbiAgYWRkTGlzdGVuZXIoXCIuZWRpdFwiLCBvcGVuRWRpdEZvcm0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBvcHVsYXRlUHJvamVjdERpc3BsYXksXG4gIHBvcHVsYXRlU2lkZWJhcixcbiAgYWRkTGlzdGVuZXIsXG4gIHBvcHVsYXRlVGltZWREaXNwbGF5LFxuICBoaWRlQWxsRm9ybXMsXG59O1xuIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IFZpZXcgZnJvbSBcIi4vVUlcIjtcblxuY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluYm94XCIpO1xuY29uc3QgdG9kYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZGF5XCIpO1xuY29uc3Qgd2VlayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2Vla1wiKTtcblxuZnVuY3Rpb24gaGFuZGxlVG9kb0RlbGV0ZShlKSB7XG4gIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIpO1xuICBjb25zdCB0b2RvSW5kZXggPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xuICBQcm9qZWN0LnJlbW92ZVRvZG9Gcm9tUHJvamVjdChwcm9qZWN0TmFtZSwgdG9kb0luZGV4KTtcbiAgY29uc3QgZGlzcGxheVByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKS50ZXh0Q29udGVudDtcbiAgaWYgKGRpc3BsYXlQcm9qZWN0ID09PSBcIkRhaWx5IFByb2plY3RzXCIpIHtcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IFByb2plY3QuZ2V0RGFpbHlQcm9qZWN0cygpO1xuICAgIFZpZXcucG9wdWxhdGVUaW1lZERpc3BsYXkocHJvamVjdExpc3QsIFwiRGFpbHkgUHJvamVjdHNcIik7XG4gIH0gZWxzZSBpZiAoZGlzcGxheVByb2plY3QgPT09IFwiV2Vla2x5IFByb2plY3RzXCIpIHtcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IFByb2plY3QuZ2V0V2Vla2x5UHJvamVjdHMoKTtcbiAgICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHByb2plY3RMaXN0LCBcIldlZWtseSBQcm9qZWN0c1wiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKHByb2plY3ROYW1lKTtcbiAgICBWaWV3LnBvcHVsYXRlUHJvamVjdERpc3BsYXkocHJvamVjdE5hbWUsIHRvZG9zKTtcbiAgfVxuICBWaWV3LmFkZExpc3RlbmVyKFwiLnJlbW92ZVwiLCBoYW5kbGVUb2RvRGVsZXRlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3VG9kbyhlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgZm9ybSA9IGUudGFyZ2V0O1xuICBjb25zdCBwcm9qZWN0TmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm0tdGl0bGVcIikudGV4dENvbnRlbnQ7XG4gIGNvbnN0IHRpdGxlID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpLnZhbHVlO1xuICBjb25zdCBkYXRlID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI2RhdGVcIikudmFsdWU7XG4gIGNvbnN0IHByaW9yaXR5ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpLnZhbHVlO1xuICBQcm9qZWN0LmFkZFRvZG9Ub1Byb2plY3QocHJvamVjdE5hbWUsIHRpdGxlLCBcImxvbFwiLCBkYXRlLCBwcmlvcml0eSk7XG4gIGNvbnN0IHRvZG9zID0gUHJvamVjdC5nZXRQcm9qZWN0VG9kb3MocHJvamVjdE5hbWUpO1xuICBWaWV3LnBvcHVsYXRlUHJvamVjdERpc3BsYXkocHJvamVjdE5hbWUsIHRvZG9zKTtcbiAgVmlldy5hZGRMaXN0ZW5lcihcIi5yZW1vdmVcIiwgaGFuZGxlVG9kb0RlbGV0ZSk7XG4gIGUudGFyZ2V0LnJlc2V0KCk7XG4gIFZpZXcuaGlkZUFsbEZvcm1zKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dQcm9qZWN0VG9kb3MoZSkge1xuICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdFwiKTtcbiAgY29uc3QgdG9kb3MgPSBQcm9qZWN0LmdldFByb2plY3RUb2Rvcyhwcm9qZWN0TmFtZSk7XG4gIGlmICghdG9kb3MpIHJldHVybjtcbiAgVmlldy5wb3B1bGF0ZVByb2plY3REaXNwbGF5KHByb2plY3ROYW1lLCB0b2Rvcyk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucmVtb3ZlXCIsIGhhbmRsZVRvZG9EZWxldGUpO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5SW5ib3goKSB7XG4gIGNvbnN0IHRvZG9zID0gUHJvamVjdC5nZXRQcm9qZWN0VG9kb3MoXCJpbmJveFwiKTtcbiAgVmlldy5wb3B1bGF0ZVByb2plY3REaXNwbGF5KFwiaW5ib3hcIiwgdG9kb3MpO1xuICBWaWV3LmFkZExpc3RlbmVyKFwiLnJlbW92ZVwiLCBoYW5kbGVUb2RvRGVsZXRlKTtcbn1cblxudG9kYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgdG9kYXlQcm9qZWN0cyA9IFByb2plY3QuZ2V0RGFpbHlQcm9qZWN0cygpO1xuICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHRvZGF5UHJvamVjdHMsIFwiRGFpbHkgUHJvamVjdHNcIik7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucmVtb3ZlXCIsIGhhbmRsZVRvZG9EZWxldGUpO1xufSk7XG5cbndlZWsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3Qgd2Vla1Byb2plY3RzID0gUHJvamVjdC5nZXRXZWVrbHlQcm9qZWN0cygpO1xuICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHdlZWtQcm9qZWN0cywgXCJXZWVrbHkgUHJvamVjdHNcIik7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucmVtb3ZlXCIsIGhhbmRsZVRvZG9EZWxldGUpO1xufSk7XG5cbmluYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5SW5ib3gpO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9qZWN0RGVsZXRlKGUpIHtcbiAgY29uc3QgcHJvamVjdCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdFwiKTtcbiAgUHJvamVjdC5kZWxldGVQcm9qZWN0KHByb2plY3QpO1xuICBWaWV3LnBvcHVsYXRlU2lkZWJhcihPYmplY3Qua2V5cyhQcm9qZWN0LmdldFByb2plY3RzKCkpKTtcbiAgVmlldy5hZGRMaXN0ZW5lcihcIi5kZWxldGUtcHJvamVjdFwiLCBoYW5kbGVQcm9qZWN0RGVsZXRlKTtcbiAgVmlldy5hZGRMaXN0ZW5lcihcIi5wcm9qZWN0LXRhYlwiLCBzaG93UHJvamVjdFRvZG9zKTtcbiAgY29uc3QgdG9kb3MgPSBQcm9qZWN0LmdldFByb2plY3RUb2RvcyhcImluYm94XCIpO1xuICBWaWV3LnBvcHVsYXRlUHJvamVjdERpc3BsYXkoXCJpbmJveFwiLCB0b2Rvcyk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucmVtb3ZlXCIsIGhhbmRsZVRvZG9EZWxldGUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOZXdQcm9qZWN0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1uYW1lXCIpLnZhbHVlO1xuICBpZiAoUHJvamVjdC52ZXJpZnlQcm9qZWN0TmFtZShwcm9qZWN0TmFtZSkpIHtcbiAgICBhbGVydChcIlByb2plY3RzIE5hbWUgY2Fubm90IGJlIHRoZSBTYW1lIVwiKTtcbiAgICByZXR1cm47XG4gIH1cbiAgUHJvamVjdC5jcmVhdGVQcm9qZWN0KHByb2plY3ROYW1lKTtcbiAgVmlldy5wb3B1bGF0ZVNpZGViYXIoT2JqZWN0LmtleXMoUHJvamVjdC5nZXRQcm9qZWN0cygpKSk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIuZGVsZXRlLXByb2plY3RcIiwgaGFuZGxlUHJvamVjdERlbGV0ZSk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucHJvamVjdC10YWJcIiwgc2hvd1Byb2plY3RUb2Rvcyk7XG4gIGUudGFyZ2V0LnJlc2V0KCk7XG4gIFZpZXcuaGlkZUFsbEZvcm1zKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRUb2RvKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBkdWVEYXRlID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcihcIiNkYXRlXCIpLnZhbHVlO1xuICBjb25zdCBwcmlvcml0eSA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIikudmFsdWU7XG4gIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0XCIpLnZhbHVlO1xuICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIjaW5kZXhcIikudmFsdWU7XG4gIFByb2plY3QudXBkYXRlVG9kbyhwcm9qZWN0TmFtZSwgaW5kZXgsIGR1ZURhdGUsIHByaW9yaXR5KTtcbiAgY29uc3QgZGlzcGxheVByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKS50ZXh0Q29udGVudDtcbiAgaWYgKGRpc3BsYXlQcm9qZWN0ID09PSBcIkRhaWx5IFByb2plY3RzXCIpIHtcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IFByb2plY3QuZ2V0RGFpbHlQcm9qZWN0cygpO1xuICAgIFZpZXcucG9wdWxhdGVUaW1lZERpc3BsYXkocHJvamVjdExpc3QsIFwiRGFpbHkgUHJvamVjdHNcIik7XG4gIH0gZWxzZSBpZiAoZGlzcGxheVByb2plY3QgPT09IFwiV2Vla2x5IFByb2plY3RzXCIpIHtcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IFByb2plY3QuZ2V0V2Vla2x5UHJvamVjdHMoKTtcbiAgICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHByb2plY3RMaXN0LCBcIldlZWtseSBQcm9qZWN0c1wiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKHByb2plY3ROYW1lKTtcbiAgICBWaWV3LnBvcHVsYXRlUHJvamVjdERpc3BsYXkocHJvamVjdE5hbWUsIHRvZG9zKTtcbiAgfVxuICBWaWV3LmFkZExpc3RlbmVyKFwiLnJlbW92ZVwiLCBoYW5kbGVUb2RvRGVsZXRlKTtcbiAgZS50YXJnZXQucmVzZXQoKTtcbiAgVmlldy5oaWRlQWxsRm9ybXMoKTtcbn1cblxuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Byb2plY3QpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdUb2RvKTtcbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdG9kby1mb3JtXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRUb2RvKTtcblxuZXhwb3J0IGRlZmF1bHQgKCkgPT4ge1xuICBkaXNwbGF5SW5ib3goKTtcbiAgVmlldy5wb3B1bGF0ZVNpZGViYXIoT2JqZWN0LmtleXMoUHJvamVjdC5nZXRQcm9qZWN0cygpKSk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIuZGVsZXRlLXByb2plY3RcIiwgaGFuZGxlUHJvamVjdERlbGV0ZSk7XG4gIFZpZXcuYWRkTGlzdGVuZXIoXCIucHJvamVjdC10YWJcIiwgc2hvd1Byb2plY3RUb2Rvcyk7XG59O1xuIl0sIm5hbWVzIjpbInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJzdGFydE9mRGF5IiwiZGlydHlEYXRlIiwiZGF0ZSIsInNldEhvdXJzIiwiaXNTYW1lRGF5IiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mRGF5IiwiZGF0ZVJpZ2h0U3RhcnRPZkRheSIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJNYXRoIiwiY2VpbCIsImZsb29yIiwic3RhcnRPZldlZWsiLCJkaXJ0eU9wdGlvbnMiLCJvcHRpb25zIiwibG9jYWxlIiwibG9jYWxlV2Vla1N0YXJ0c09uIiwid2Vla1N0YXJ0c09uIiwiZGVmYXVsdFdlZWtTdGFydHNPbiIsIlJhbmdlRXJyb3IiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1NhbWVXZWVrIiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwidXBkYXRlU3RvcmFnZSIsInByb2plY3RzIiwicHJvamVjdFN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2F2ZWRQcm9qZWN0cyIsImdldEl0ZW0iLCJwYXJzZSIsImdldFN0b3JhZ2UiLCJpbmJveCIsImluaXRpYWxpemVQcm9qZWN0cyIsIm5hbWUiLCJwcm9qZWN0TmFtZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0b2RvIiwicHVzaCIsInRvZG9JbmRleCIsInNwbGljZSIsImluZGV4IiwibmV3RGF0ZSIsIm5ld1ByaW9yaXR5IiwiY2xvbmVkT2JqIiwia2V5cyIsImZvckVhY2giLCJwcm9qZWN0IiwiZmlsdGVyZWQiLCJtYXAiLCJub3ciLCJpc1RvZGF5IiwiaXNUaGlzV2VlayIsImN1c3RvbVByb2plY3RzIiwiY29uY2F0IiwiaW5jbHVkZXMiLCJjcmVhdGVDYXJkIiwiY2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsImFkZExpc3RlbmVyIiwic2VsZWN0b3IiLCJjYWxsYmFjayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGVBbGxGb3JtcyIsIndyYXBwZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJvcGVuVG9kb0Zvcm0iLCJlIiwiZm9ybSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZSIsIm9wZW5FZGl0Rm9ybSIsInZhbHVlIiwiYnV0dG9uIiwicG9wdWxhdGVQcm9qZWN0RGlzcGxheSIsInRvZG9zIiwiZGlzcGxheSIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwibmV3dG9kb0J0biIsImNyZWF0ZUVsZW1lbnQiLCJwb3B1bGF0ZVNpZGViYXIiLCJwcm9qZWN0c0Rpc3BsYXkiLCJ0YWIiLCJkZWxldGVCdG4iLCJwb3B1bGF0ZVRpbWVkRGlzcGxheSIsInByb2plY3RMaXN0IiwiaW50ZXJ2YWwiLCJ0b2RheSIsIndlZWsiLCJoYW5kbGVUb2RvRGVsZXRlIiwiZGlzcGxheVByb2plY3QiLCJzaG93UHJvamVjdFRvZG9zIiwiZGlzcGxheUluYm94IiwiaGFuZGxlUHJvamVjdERlbGV0ZSIsInRvZGF5UHJvamVjdHMiLCJ3ZWVrUHJvamVjdHMiLCJwcmV2ZW50RGVmYXVsdCIsImFsZXJ0IiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9