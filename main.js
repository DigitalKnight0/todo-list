(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===o?new Date(t.getTime()):"number"==typeof t||"[object Number]"===o?new Date(t):("string"!=typeof t&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function o(o){e(1,arguments);var r=t(o);return r.setHours(0,0,0,0),r}function r(t,r){e(2,arguments);var n=o(t),c=o(r);return n.getTime()===c.getTime()}function n(t){return e(1,arguments),r(t,Date.now())}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function a(o,r){e(1,arguments);var n=r||{},a=n.locale,i=a&&a.options&&a.options.weekStartsOn,u=null==i?0:c(i),s=null==n.weekStartsOn?u:c(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=t(o),d=l.getDay(),p=(d<s?7:0)+d-s;return l.setDate(l.getDate()-p),l.setHours(0,0,0,0),l}function i(t,o,r){e(2,arguments);var n=a(t,r),c=a(o,r);return n.getTime()===c.getTime()}function u(t,o){return e(1,arguments),i(t,Date.now(),o)}function s(e){const t=JSON.stringify(e);localStorage.setItem("project",t)}const l=function(){const e=function(){const e=localStorage.getItem("project");return e?JSON.parse(e):null}();return e||{inbox:[]}}(),d=function(e){l[e]=[],s(l)},p=function(e){delete l[e],s(l)},y=function(e,t,o,r,n){const c=function(e,t,o,r){return{title:e,description:t,dueDate:o,priority:r}}(t,o,r,n);l[e].push(c),s(l)},m=function(e,t){l[e].splice(t,1),s(l)},f=function(){return l},j=function(e){return l[e]},S=function(e,t,o,r){const n=l[e][t];n.dueDate=o,n.priority=r,s(l)},b=function(){const e=Object.assign({},l);for(const t in e){const o=e[t].map((e=>n(new Date(e.dueDate))?e:""));e[t]=o}return e},g=function(){const e=Object.assign({},l);for(const t in e){const o=e[t].map((e=>u(new Date(e.dueDate))?e:""));e[t]=o}return e},q=function(e){const t=Object.keys(l);return["Daily","Daily Projects","This Week","Weekly Projects","inbox"].concat(t).includes(e)};function v(e){const t=document.querySelector(".card-template").content.cloneNode(!0).querySelector(".card");return t.querySelector(".title").textContent=e.title,t.querySelector(".date").textContent=e.dueDate,t.querySelector(".priority").textContent=e.priority,t}function D(e,t){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",t)}))}function h(e){const t=document.querySelector(".todo-form"),o=e.target.getAttribute("data-project");t.querySelector(".todo-form-title").textContent=o,document.querySelector(".n-todo").classList.remove("hidden")}function x(e){const t=document.querySelector(".edit-todo-form");t.querySelector("#index").value=e.target.getAttribute("data-index"),t.querySelector("#project").value=e.target.getAttribute("data-project"),document.querySelector(".e-todo").classList.remove("hidden")}function L(){document.querySelectorAll(".form-wrapper").forEach((e=>{e.classList.add("hidden")}))}D(".new-project",(function(){document.querySelector(".n-project").classList.remove("hidden")})),document.querySelectorAll(".cancel").forEach((e=>{e.addEventListener("click",(e=>{L()}))}));const A={populateProjectDisplay:function(e,t){const o=document.querySelector(".display");o.textContent="",document.querySelector(".project-name").textContent=e,t.forEach(((t,r)=>{const n=v(t);n.querySelector(".remove").setAttribute("data-project",e),n.querySelector(".remove").setAttribute("data-index",r),n.querySelector(".edit").setAttribute("data-project",e),n.querySelector(".edit").setAttribute("data-index",r),o.appendChild(n)}));const r=document.createElement("button");r.classList.add("new-todo"),r.setAttribute("data-project",e),r.textContent="Add new Todo",r.addEventListener("click",h),D(".edit",x),o.appendChild(r)},populateSidebar:function(e){const t=document.querySelector(".projects");t.textContent="",e.forEach((e=>{if("inbox"===e)return;const o=document.createElement("div");o.classList.add("project-tab"),o.setAttribute("data-project",e);const r=document.createElement("p");r.textContent=e;const n=document.createElement("button");n.textContent="X",n.setAttribute("data-project",e),n.classList.add("delete-project"),o.appendChild(r),o.appendChild(n),t.appendChild(o)}))},addListener:D,populateTimedDisplay:function(e,t){const o=document.querySelector(".display");o.textContent="",document.querySelector(".project-name").textContent=t;for(const t in e)e[t].forEach(((e,r)=>{if(""===e)return;const n=v(e);n.querySelector(".remove").setAttribute("data-project",t),n.querySelector(".remove").setAttribute("data-index",r),n.querySelector(".edit").setAttribute("data-project",t),n.querySelector(".edit").setAttribute("data-index",r),o.appendChild(n)}));D(".edit",x)},hideAllForms:L},w=document.querySelector(".inbox"),k=document.querySelector(".today"),E=document.querySelector(".week");function C(){const e=j("inbox");A.populateProjectDisplay("inbox",e),A.addListener(".remove",O)}function P(e){const t=e.target.getAttribute("data-project");p(t),A.populateSidebar(Object.keys(f())),A.addListener(".delete-project",P),A.addListener(".project-tab",T);const o=j("inbox");A.populateProjectDisplay("inbox",o),A.addListener(".remove",O)}function T(e){const t=e.target.getAttribute("data-project"),o=j(t);o&&(A.populateProjectDisplay(t,o),A.addListener(".remove",O))}function O(e){const t=e.target.getAttribute("data-project"),o=e.target.getAttribute("data-index");m(t,o);const r=document.querySelector(".project-name").textContent;if("Daily Projects"===r){const e=b();A.populateTimedDisplay(e,"Daily Projects")}else if("Weekly Projects"===r){const e=g();A.populateTimedDisplay(e,"Weekly Projects")}else{const e=j(t);A.populateProjectDisplay(t,e)}A.addListener(".remove",O)}k.addEventListener("click",(()=>{const e=b();A.populateTimedDisplay(e,"Daily Projects"),A.addListener(".remove",O)})),E.addEventListener("click",(()=>{const e=g();A.populateTimedDisplay(e,"Weekly Projects"),A.addListener(".remove",O)})),w.addEventListener("click",C),document.querySelector(".project-form").addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelector("#project-name").value;q(t)?alert("Projects Name cannot be the Same!"):(d(t),A.populateSidebar(Object.keys(f())),A.addListener(".delete-project",P),A.addListener(".project-tab",T),e.target.reset(),A.hideAllForms())})),document.querySelector(".todo-form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target,o=t.querySelector(".todo-form-title").textContent,r=t.querySelector("#title").value,n=t.querySelector("#date").value,c=t.querySelector("#priority").value;y(o,r,"lol",n,c);const a=j(o);A.populateProjectDisplay(o,a),A.addListener(".remove",O),e.target.reset(),A.hideAllForms()})),document.querySelector(".edit-todo-form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target.querySelector("#date").value,o=e.target.querySelector("#priority").value,r=e.target.querySelector("#project").value,n=e.target.querySelector("#index").value;S(r,n,t,o);const c=document.querySelector(".project-name").textContent;if("Daily Projects"===c){const e=b();A.populateTimedDisplay(e,"Daily Projects")}else if("Weekly Projects"===c){const e=g();A.populateTimedDisplay(e,"Weekly Projects")}else{const e=j(r);A.populateProjectDisplay(r,e)}A.addListener(".remove",O),e.target.reset(),A.hideAllForms()})),C(),A.populateSidebar(Object.keys(f())),A.addListener(".delete-project",P),A.addListener(".project-tab",T)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxjQUFpQixrQkFBbUJnRCxHQUNwQyxjQUFpQixlQUFnQkMsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZldlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUaGlzV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kb3MuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ldmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIHZhciByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGU7XG4gIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUgJiYgbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMud2Vla1N0YXJ0c09uO1xuICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eU9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IGlzU2FtZVdlZWsgZnJvbSBcIi4uL2lzU2FtZVdlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQgYW5kIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5XG4gKiAvLyBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGhpc1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lV2VlayhkaXJ0eURhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufSIsImV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTdG9yYWdlKHByb2plY3RzKXtcbiAgICBjb25zdCBwcm9qZWN0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3QnLCBwcm9qZWN0U3RyaW5nKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmFnZSgpe1xuICAgIGNvbnN0IHByb2plY3RzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3QnKVxuICAgIGlmKCFwcm9qZWN0cykgcmV0dXJuIG51bGxcbiAgICBlbHNlIHJldHVybiBKU09OLnBhcnNlKHByb2plY3RzKVxufSIsImltcG9ydCB7aXNUb2RheSwgaXNUaGlzV2Vla30gZnJvbSAnZGF0ZS1mbnMnXG5pbXBvcnQgY3JlYXRlVG9kbyBmcm9tIFwiLi90b2Rvcy5qc1wiXG5pbXBvcnQgeyB1cGRhdGVTdG9yYWdlLCBnZXRTdG9yYWdlfSBmcm9tICcuL3N0b3JhZ2UuanMnXG5cblxuY29uc3QgcHJvamVjdHMgPSBpbml0aWFsaXplUHJvamVjdHMoKVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvamVjdHMoKXtcbiAgICBjb25zdCBzYXZlZFByb2plY3RzID0gZ2V0U3RvcmFnZSgpXG4gICAgcmV0dXJuIHNhdmVkUHJvamVjdHMgPyBzYXZlZFByb2plY3RzIDoge2luYm94OiBbXX1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdChuYW1lKXtcbiAgICBwcm9qZWN0c1tuYW1lXSA9IFtdXG5cbiAgICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKVxufVxuXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0KHByb2plY3ROYW1lKXtcbiAgICBkZWxldGUgcHJvamVjdHNbcHJvamVjdE5hbWVdXG5cbiAgICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKVxufVxuXG5mdW5jdGlvbiBhZGRUb2RvVG9Qcm9qZWN0KHByb2plY3ROYW1lLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KXtcbiAgICBjb25zdCB0b2RvID0gY3JlYXRlVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KVxuICAgIHByb2plY3RzW3Byb2plY3ROYW1lXS5wdXNoKHRvZG8pXG5cbiAgICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKVxufVxuXG5mdW5jdGlvbiByZW1vdmVUb2RvRnJvbVByb2plY3QocHJvamVjdE5hbWUsIHRvZG9JbmRleCl7XG4gICAgcHJvamVjdHNbcHJvamVjdE5hbWVdLnNwbGljZSh0b2RvSW5kZXgsIDEpXG5cbiAgICB1cGRhdGVTdG9yYWdlKHByb2plY3RzKVxufVxuXG5mdW5jdGlvbiBnZXRQcm9qZWN0VG9kb3MocHJvamVjdE5hbWUpe1xuICAgIHJldHVybiBwcm9qZWN0c1twcm9qZWN0TmFtZV1cbn1cblxuZnVuY3Rpb24gZ2V0UHJvamVjdHMoKXtcbiAgICByZXR1cm4gcHJvamVjdHNcbn1cblxuZnVuY3Rpb24gdXBkYXRlVG9kbyhwcm9qZWN0TmFtZSwgaW5kZXgsIG5ld0RhdGUsIG5ld1ByaW9yaXR5KXtcbiAgICBjb25zdCB0b2RvID0gcHJvamVjdHNbcHJvamVjdE5hbWVdW2luZGV4XVxuICAgIHRvZG8uZHVlRGF0ZSA9IG5ld0RhdGVcbiAgICB0b2RvLnByaW9yaXR5ID0gbmV3UHJpb3JpdHlcblxuICAgIHVwZGF0ZVN0b3JhZ2UocHJvamVjdHMpXG59XG5cbmZ1bmN0aW9uIGdldERhaWx5UHJvamVjdHMoKXtcbiAgICBjb25zdCBjbG9uZWRPYmogPSBPYmplY3QuYXNzaWduKHt9LCBwcm9qZWN0cylcbiAgICBmb3IoIGNvbnN0IHByb2plY3QgaW4gY2xvbmVkT2JqKXtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBjbG9uZWRPYmpbcHJvamVjdF0ubWFwKHRvZG8gPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZG8uZHVlRGF0ZSlcbiAgICAgICAgICAgIGlmKGlzVG9kYXkoZGF0ZSkpIHJldHVybiB0b2RvXG4gICAgICAgICAgICBlbHNlIHJldHVybiAnJ1xuICAgICAgICB9KVxuICAgICAgICBjbG9uZWRPYmpbcHJvamVjdF0gPSBmaWx0ZXJlZFxuICAgIH1cbiAgICByZXR1cm4gY2xvbmVkT2JqXG59XG5cbmZ1bmN0aW9uIGdldFdlZWtseVByb2plY3RzKCl7XG4gICAgY29uc3QgY2xvbmVkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvamVjdHMpXG4gICAgZm9yKCBjb25zdCBwcm9qZWN0IGluIGNsb25lZE9iail7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0gY2xvbmVkT2JqW3Byb2plY3RdLm1hcCh0b2RvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0b2RvLmR1ZURhdGUpXG4gICAgICAgICAgICBpZihpc1RoaXNXZWVrKGRhdGUpKSByZXR1cm4gdG9kb1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gJydcbiAgICAgICAgfSlcbiAgICAgICAgY2xvbmVkT2JqW3Byb2plY3RdID0gZmlsdGVyZWRcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lZE9ialxufVxuXG5mdW5jdGlvbiB2ZXJpZnlQcm9qZWN0TmFtZShwcm9qZWN0TmFtZSl7XG4gICAgY29uc3QgZGVmYXVsdHMgPSBbJ0RhaWx5JywgJ0RhaWx5IFByb2plY3RzJywgJ1RoaXMgV2VlaycsICdXZWVrbHkgUHJvamVjdHMnLCAnaW5ib3gnXVxuICAgIGNvbnN0IGN1c3RvbVByb2plY3RzID0gT2JqZWN0LmtleXMocHJvamVjdHMpXG4gICAgY29uc3QgZXhpc3RpbmdQcm9qZWN0cyA9IGRlZmF1bHRzLmNvbmNhdChjdXN0b21Qcm9qZWN0cylcbiAgICByZXR1cm4gZXhpc3RpbmdQcm9qZWN0cy5pbmNsdWRlcyhwcm9qZWN0TmFtZSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNyZWF0ZVByb2plY3QsXG4gICAgZGVsZXRlUHJvamVjdCxcbiAgICBhZGRUb2RvVG9Qcm9qZWN0LFxuICAgIHJlbW92ZVRvZG9Gcm9tUHJvamVjdCxcbiAgICBnZXRQcm9qZWN0cyxcbiAgICBnZXRQcm9qZWN0VG9kb3MsIFxuICAgIHVwZGF0ZVRvZG8sXG4gICAgZ2V0RGFpbHlQcm9qZWN0cyxcbiAgICBnZXRXZWVrbHlQcm9qZWN0cyxcbiAgICB2ZXJpZnlQcm9qZWN0TmFtZVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZU5ld1RvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSl7XG4gIFxuICAgIHJldHVybiB7dGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eX1cbn0iLCJcbmZ1bmN0aW9uIHBvcHVsYXRlUHJvamVjdERpc3BsYXkocHJvamVjdE5hbWUsIHRvZG9zKXtcbiAgICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpc3BsYXknKVxuICAgIGRpc3BsYXkudGV4dENvbnRlbnQgPSAnJ1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lXG5cbiAgICB0b2Rvcy5mb3JFYWNoKCh0b2RvLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZCh0b2RvKVxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIHByb2plY3ROYW1lKVxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBpbmRleClcbiAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWRpdCcpLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JywgcHJvamVjdE5hbWUpXG4gICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmVkaXQnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBpbmRleClcbiAgICAgICAgZGlzcGxheS5hcHBlbmRDaGlsZChjYXJkKVxuICAgIH0pXG5cbiAgICBjb25zdCBuZXd0b2RvQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBuZXd0b2RvQnRuLmNsYXNzTGlzdC5hZGQoJ25ldy10b2RvJylcbiAgICBuZXd0b2RvQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JywgcHJvamVjdE5hbWUpXG4gICAgbmV3dG9kb0J0bi50ZXh0Q29udGVudCA9IFwiQWRkIG5ldyBUb2RvXCJcbiAgICBuZXd0b2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblRvZG9Gb3JtKVxuICAgIGFkZExpc3RlbmVyKCcuZWRpdCcsIG9wZW5FZGl0Rm9ybSlcbiAgICBkaXNwbGF5LmFwcGVuZENoaWxkKG5ld3RvZG9CdG4pXG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlVGltZWREaXNwbGF5KHByb2plY3RMaXN0LCBpbnRlcnZhbCl7XG4gICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5JylcbiAgICBkaXNwbGF5LnRleHRDb250ZW50ID0gJydcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1uYW1lJykudGV4dENvbnRlbnQgPSBpbnRlcnZhbFxuXG4gICAgZm9yKGNvbnN0IHByb2plY3ROYW1lIGluIHByb2plY3RMaXN0KXtcbiAgICAgICAgY29uc3QgdG9kb3MgPSBwcm9qZWN0TGlzdFtwcm9qZWN0TmFtZV1cbiAgICAgICAgdG9kb3MuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmKHRvZG8gPT09ICcnKSByZXR1cm5cbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKHRvZG8pXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIHByb2plY3ROYW1lKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlJykuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaW5kZXgpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0Jykuc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnLCBwcm9qZWN0TmFtZSlcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmVkaXQnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBpbmRleClcbiAgICAgICAgICAgIGRpc3BsYXkuYXBwZW5kQ2hpbGQoY2FyZClcbiAgICAgICAgfSlcbiAgICB9XG4gICAgYWRkTGlzdGVuZXIoJy5lZGl0Jywgb3BlbkVkaXRGb3JtKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKHRvZG8pe1xuICAgIGNvbnN0IGNhcmRUZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtdGVtcGxhdGUnKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICAgIGNvbnN0IGNhcmQgPSBjYXJkVGVtcC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXG4gICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGVcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlJykudGV4dENvbnRlbnQgPSB0b2RvLmR1ZURhdGVcbiAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eScpLnRleHRDb250ZW50ID0gdG9kby5wcmlvcml0eVxuICAgIHJldHVybiBjYXJkXG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlU2lkZWJhcihwcm9qZWN0cyl7XG4gICAgY29uc3QgcHJvamVjdHNEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbiAgICBwcm9qZWN0c0Rpc3BsYXkudGV4dENvbnRlbnQgPSAnJ1xuXG4gICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgaWYocHJvamVjdCA9PT0gJ2luYm94JykgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXRhYicpXG4gICAgICAgIHRhYi5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIHByb2plY3QpXG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gcHJvamVjdFxuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIlhcIlxuICAgICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnLCBwcm9qZWN0KVxuICAgICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QnKVxuICAgICAgICB0YWIuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpXG4gICAgICAgIHRhYi5hcHBlbmRDaGlsZChkZWxldGVCdG4pXG4gICAgICAgIHByb2plY3RzRGlzcGxheS5hcHBlbmRDaGlsZCh0YWIpXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gYWRkTGlzdGVuZXIoc2VsZWN0b3IsIGNhbGxiYWNrKXtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGxiYWNrKVxuICAgIH0pXG59XG5cbmFkZExpc3RlbmVyKCcubmV3LXByb2plY3QnLCBvcGVuUHJvamVjdEZvcm0pXG5cbmZ1bmN0aW9uIG9wZW5Qcm9qZWN0Rm9ybSgpe1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uLXByb2plY3QnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxufVxuXG5mdW5jdGlvbiBvcGVuVG9kb0Zvcm0oZSl7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKVxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnKVxuICAgIGZvcm0ucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybS10aXRsZScpLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWVcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubi10b2RvJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbn1cblxuZnVuY3Rpb24gb3BlbkVkaXRGb3JtKGUpe1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWZvcm0nKVxuICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI2luZGV4JykudmFsdWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKVxuICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JylcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZS10b2RvJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbn1cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbmNlbCcpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PiB7XG4gICAgICBoaWRlQWxsRm9ybXMoKVxuICAgIH0pXG59KVxuXG5mdW5jdGlvbiBoaWRlQWxsRm9ybXMoKXtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS13cmFwcGVyJykuZm9yRWFjaCh3cmFwcGVyID0+IHtcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBwb3B1bGF0ZVByb2plY3REaXNwbGF5LFxuICAgIHBvcHVsYXRlU2lkZWJhcixcbiAgICBhZGRMaXN0ZW5lcixcbiAgICBwb3B1bGF0ZVRpbWVkRGlzcGxheSxcbiAgICBoaWRlQWxsRm9ybXNcbn0iLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0LmpzXCJcbmltcG9ydCBWaWV3IGZyb20gXCIuL1VJLmpzXCJcblxuY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5ib3gnKVxuY29uc3QgdG9kYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kYXknKVxuY29uc3Qgd2VlayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWVrJylcblxudG9kYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgIGNvbnN0IHRvZGF5UHJvamVjdHMgPSBQcm9qZWN0LmdldERhaWx5UHJvamVjdHMoKVxuICAgIFZpZXcucG9wdWxhdGVUaW1lZERpc3BsYXkodG9kYXlQcm9qZWN0cywgJ0RhaWx5IFByb2plY3RzJylcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcucmVtb3ZlJywgaGFuZGxlVG9kb0RlbGV0ZSlcbn0pXG5cbndlZWsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgIGNvbnN0IHdlZWtQcm9qZWN0cyA9IFByb2plY3QuZ2V0V2Vla2x5UHJvamVjdHMoKVxuICAgIFZpZXcucG9wdWxhdGVUaW1lZERpc3BsYXkod2Vla1Byb2plY3RzLCAnV2Vla2x5IFByb2plY3RzJylcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcucmVtb3ZlJywgaGFuZGxlVG9kb0RlbGV0ZSlcbn0pXG5cbmluYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGlzcGxheUluYm94KVxuXG5mdW5jdGlvbiBkaXNwbGF5SW5ib3goKXtcbiAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKCdpbmJveCcpXG4gICAgVmlldy5wb3B1bGF0ZVByb2plY3REaXNwbGF5KCdpbmJveCcsIHRvZG9zKVxuICAgIFZpZXcuYWRkTGlzdGVuZXIoJy5yZW1vdmUnLCBoYW5kbGVUb2RvRGVsZXRlKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9qZWN0RGVsZXRlKGUpe1xuICAgIGNvbnN0IHByb2plY3QgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcpXG4gICAgUHJvamVjdC5kZWxldGVQcm9qZWN0KHByb2plY3QpXG4gICAgVmlldy5wb3B1bGF0ZVNpZGViYXIoT2JqZWN0LmtleXMoUHJvamVjdC5nZXRQcm9qZWN0cygpKSlcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcuZGVsZXRlLXByb2plY3QnLCBoYW5kbGVQcm9qZWN0RGVsZXRlKVxuICAgIFZpZXcuYWRkTGlzdGVuZXIoJy5wcm9qZWN0LXRhYicsIHNob3dQcm9qZWN0VG9kb3MpXG4gICAgY29uc3QgdG9kb3MgPSBQcm9qZWN0LmdldFByb2plY3RUb2RvcygnaW5ib3gnKVxuICAgIFZpZXcucG9wdWxhdGVQcm9qZWN0RGlzcGxheSgnaW5ib3gnLCB0b2RvcylcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcucmVtb3ZlJywgaGFuZGxlVG9kb0RlbGV0ZSlcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3UHJvamVjdChlKXtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LW5hbWUnKS52YWx1ZVxuICAgIGlmKFByb2plY3QudmVyaWZ5UHJvamVjdE5hbWUocHJvamVjdE5hbWUpKXtcbiAgICAgICAgYWxlcnQoJ1Byb2plY3RzIE5hbWUgY2Fubm90IGJlIHRoZSBTYW1lIScpXG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBQcm9qZWN0LmNyZWF0ZVByb2plY3QocHJvamVjdE5hbWUpXG4gICAgVmlldy5wb3B1bGF0ZVNpZGViYXIoT2JqZWN0LmtleXMoUHJvamVjdC5nZXRQcm9qZWN0cygpKSlcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcuZGVsZXRlLXByb2plY3QnLCBoYW5kbGVQcm9qZWN0RGVsZXRlKVxuICAgIFZpZXcuYWRkTGlzdGVuZXIoJy5wcm9qZWN0LXRhYicsIHNob3dQcm9qZWN0VG9kb3MpXG4gICAgZS50YXJnZXQucmVzZXQoKVxuICAgIFZpZXcuaGlkZUFsbEZvcm1zKClcbn1cblxuZnVuY3Rpb24gc2hvd1Byb2plY3RUb2RvcyhlKXtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JylcbiAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKHByb2plY3ROYW1lKVxuICAgIGlmKCF0b2RvcykgcmV0dXJuXG4gICAgVmlldy5wb3B1bGF0ZVByb2plY3REaXNwbGF5KHByb2plY3ROYW1lLCB0b2RvcylcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcucmVtb3ZlJywgaGFuZGxlVG9kb0RlbGV0ZSlcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3VG9kbyhlKXtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmb3JtID0gZS50YXJnZXRcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybS10aXRsZScpLnRleHRDb250ZW50XG4gICAgY29uc3QgdGl0bGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpLnZhbHVlXG4gICAgY29uc3QgZGF0ZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZVxuICAgIGNvbnN0IHByaW9yaXR5ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZVxuICAgIFByb2plY3QuYWRkVG9kb1RvUHJvamVjdChwcm9qZWN0TmFtZSwgdGl0bGUsICdsb2wnLCBkYXRlLCBwcmlvcml0eSlcbiAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKHByb2plY3ROYW1lKVxuICAgIFZpZXcucG9wdWxhdGVQcm9qZWN0RGlzcGxheShwcm9qZWN0TmFtZSwgdG9kb3MpXG4gICAgVmlldy5hZGRMaXN0ZW5lcignLnJlbW92ZScsIGhhbmRsZVRvZG9EZWxldGUpXG4gICAgZS50YXJnZXQucmVzZXQoKVxuICAgIFZpZXcuaGlkZUFsbEZvcm1zKClcbn1cblxuZnVuY3Rpb24gaGFuZGxlVG9kb0RlbGV0ZShlKXtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JylcbiAgICBjb25zdCB0b2RvSW5kZXggPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKVxuICAgIFByb2plY3QucmVtb3ZlVG9kb0Zyb21Qcm9qZWN0KHByb2plY3ROYW1lLCB0b2RvSW5kZXgpXG4gICAgY29uc3QgZGlzcGxheVByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1uYW1lJykudGV4dENvbnRlbnRcbiAgICBpZihkaXNwbGF5UHJvamVjdCA9PT0gJ0RhaWx5IFByb2plY3RzJyl7XG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0ID0gUHJvamVjdC5nZXREYWlseVByb2plY3RzKClcbiAgICAgICAgVmlldy5wb3B1bGF0ZVRpbWVkRGlzcGxheShwcm9qZWN0TGlzdCwgJ0RhaWx5IFByb2plY3RzJylcbiAgICB9IGVsc2UgaWYoZGlzcGxheVByb2plY3QgPT09ICdXZWVrbHkgUHJvamVjdHMnKXtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBQcm9qZWN0LmdldFdlZWtseVByb2plY3RzKClcbiAgICAgICAgVmlldy5wb3B1bGF0ZVRpbWVkRGlzcGxheShwcm9qZWN0TGlzdCwgJ1dlZWtseSBQcm9qZWN0cycpXG4gICAgfSBlbHNle1xuICAgICAgICBjb25zdCB0b2RvcyA9IFByb2plY3QuZ2V0UHJvamVjdFRvZG9zKHByb2plY3ROYW1lKVxuICAgICAgICBWaWV3LnBvcHVsYXRlUHJvamVjdERpc3BsYXkocHJvamVjdE5hbWUsIHRvZG9zKVxuICAgIH0gXG4gICAgVmlldy5hZGRMaXN0ZW5lcignLnJlbW92ZScsIGhhbmRsZVRvZG9EZWxldGUpXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRUb2RvKGUpe1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGR1ZURhdGUgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgcHJpb3JpdHkgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZVxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZVxuICAgIGNvbnN0IGluZGV4ID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignI2luZGV4JykudmFsdWVcbiAgICBQcm9qZWN0LnVwZGF0ZVRvZG8ocHJvamVjdE5hbWUsIGluZGV4LCBkdWVEYXRlLCBwcmlvcml0eSlcbiAgICBjb25zdCBkaXNwbGF5UHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudFxuICAgIGlmKGRpc3BsYXlQcm9qZWN0ID09PSAnRGFpbHkgUHJvamVjdHMnKXtcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBQcm9qZWN0LmdldERhaWx5UHJvamVjdHMoKVxuICAgICAgICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHByb2plY3RMaXN0LCAnRGFpbHkgUHJvamVjdHMnKVxuICAgIH0gZWxzZSBpZihkaXNwbGF5UHJvamVjdCA9PT0gJ1dlZWtseSBQcm9qZWN0cycpe1xuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdCA9IFByb2plY3QuZ2V0V2Vla2x5UHJvamVjdHMoKVxuICAgICAgICBWaWV3LnBvcHVsYXRlVGltZWREaXNwbGF5KHByb2plY3RMaXN0LCAnV2Vla2x5IFByb2plY3RzJylcbiAgICB9IGVsc2V7XG4gICAgICAgIGNvbnN0IHRvZG9zID0gUHJvamVjdC5nZXRQcm9qZWN0VG9kb3MocHJvamVjdE5hbWUpXG4gICAgICAgIFZpZXcucG9wdWxhdGVQcm9qZWN0RGlzcGxheShwcm9qZWN0TmFtZSwgdG9kb3MpXG4gICAgfSBcbiAgICBWaWV3LmFkZExpc3RlbmVyKCcucmVtb3ZlJywgaGFuZGxlVG9kb0RlbGV0ZSlcbiAgICBlLnRhcmdldC5yZXNldCgpXG4gICAgVmlldy5oaWRlQWxsRm9ybXMoKVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1mb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlTmV3UHJvamVjdClcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVOZXdUb2RvKVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdG9kby1mb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlRWRpdFRvZG8pXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCl7XG4gICAgZGlzcGxheUluYm94KClcbiAgICBWaWV3LnBvcHVsYXRlU2lkZWJhcihPYmplY3Qua2V5cyhQcm9qZWN0LmdldFByb2plY3RzKCkpKVxuICAgIFZpZXcuYWRkTGlzdGVuZXIoJy5kZWxldGUtcHJvamVjdCcsIGhhbmRsZVByb2plY3REZWxldGUpXG4gICAgVmlldy5hZGRMaXN0ZW5lcignLnByb2plY3QtdGFiJywgc2hvd1Byb2plY3RUb2Rvcylcbn1cbiJdLCJuYW1lcyI6WyJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwic3RhcnRPZkRheSIsImRpcnR5RGF0ZSIsImRhdGUiLCJzZXRIb3VycyIsImlzU2FtZURheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1RvZGF5Iiwibm93IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJzdGFydE9mV2VlayIsImRpcnR5T3B0aW9ucyIsIm9wdGlvbnMiLCJsb2NhbGUiLCJsb2NhbGVXZWVrU3RhcnRzT24iLCJ3ZWVrU3RhcnRzT24iLCJkZWZhdWx0V2Vla1N0YXJ0c09uIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJpc1RoaXNXZWVrIiwidXBkYXRlU3RvcmFnZSIsInByb2plY3RzIiwicHJvamVjdFN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2F2ZWRQcm9qZWN0cyIsImdldEl0ZW0iLCJwYXJzZSIsImdldFN0b3JhZ2UiLCJpbmJveCIsImluaXRpYWxpemVQcm9qZWN0cyIsIm5hbWUiLCJwcm9qZWN0TmFtZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0b2RvIiwicHVzaCIsInRvZG9JbmRleCIsInNwbGljZSIsImluZGV4IiwibmV3RGF0ZSIsIm5ld1ByaW9yaXR5IiwiY2xvbmVkT2JqIiwiYXNzaWduIiwicHJvamVjdCIsImZpbHRlcmVkIiwibWFwIiwiY3VzdG9tUHJvamVjdHMiLCJrZXlzIiwiY29uY2F0IiwiaW5jbHVkZXMiLCJjcmVhdGVDYXJkIiwiY2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsImFkZExpc3RlbmVyIiwic2VsZWN0b3IiLCJjYWxsYmFjayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcGVuVG9kb0Zvcm0iLCJlIiwiZm9ybSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm9wZW5FZGl0Rm9ybSIsInZhbHVlIiwiaGlkZUFsbEZvcm1zIiwid3JhcHBlciIsImFkZCIsImJ1dHRvbiIsInBvcHVsYXRlUHJvamVjdERpc3BsYXkiLCJ0b2RvcyIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsIm5ld3RvZG9CdG4iLCJjcmVhdGVFbGVtZW50IiwicG9wdWxhdGVTaWRlYmFyIiwicHJvamVjdHNEaXNwbGF5IiwidGFiIiwiZGVsZXRlQnRuIiwicG9wdWxhdGVUaW1lZERpc3BsYXkiLCJwcm9qZWN0TGlzdCIsImludGVydmFsIiwidG9kYXkiLCJ3ZWVrIiwiZGlzcGxheUluYm94IiwiaGFuZGxlVG9kb0RlbGV0ZSIsImhhbmRsZVByb2plY3REZWxldGUiLCJzaG93UHJvamVjdFRvZG9zIiwiZGlzcGxheVByb2plY3QiLCJ0b2RheVByb2plY3RzIiwid2Vla1Byb2plY3RzIiwicHJldmVudERlZmF1bHQiLCJhbGVydCIsInJlc2V0Il0sInNvdXJjZVJvb3QiOiIifQ==